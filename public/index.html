<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Terminal Online</title>
<script src="/socket.io/socket.io.js"></script>
<style>
  body { margin: 0; background: #000; color: #0f0; font-family: monospace; }
  #terminal { white-space: pre-wrap; padding: 10px; height: 90vh; overflow-y: auto; }
  #input { width: 100%; box-sizing: border-box; padding: 10px; background: #111; color: #0f0; border: none; font-family: monospace; }
</style>
</head>
<body>
<div id="terminal"></div>
<input id="input" autocomplete="off" autofocus placeholder="Ketik command...">
<script>
  let sessionId = localStorage.getItem("sessionId") || "";
  const socket = io({ query: { sessionId } });
  const term = document.getElementById("terminal");
  const input = document.getElementById("input");

  socket.on("sessionId", (id) => {
    sessionId = id;
    localStorage.setItem("sessionId", id);
  });

  socket.on("output", (data) => {
    term.textContent += data;
    term.scrollTop = term.scrollHeight;
  });

  input.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      socket.emit("input", input.value + "\r");
      input.value = "";
    }
  });
</script>
</body>
</html>
